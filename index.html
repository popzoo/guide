<!DOCTYPE html>
<html lang="zh-CN" id="bgimg">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>POPZOO</title>
<!-- <meta name="description" content="引导页"> -->
<meta name="keywords" content="主页,导航页,引导页">
<!-- <link rel="icon" href="" mce_href="/dir/favicon.ico" type="image/x-icon"> -->
<!-- <link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/popzoo/pop/images/favicon.ico"> -->
<link rel="shortcut icon" href="img/favicon.ico">
<link rel="stylesheet" type="text/css" href="https://www.bootcss.com/p/buttons/css/buttons.css">
<link rel="stylesheet" type="text/css" href="https://www.bootcss.com/p/buttons/css/showcase.css">
<link type="text/css" rel="stylesheet" href="https://cdn.jsdelivr.net/gh/popzoo/guide/css/home.css"/>
<!-- <link type="text/css" rel="stylesheet" href="css/home.css"/> -->
<meta name="referrer" content="no-referrer"/>
<!-- music player -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">
<!-- <script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? "https://" : "http://");document.write(unescape("%3Cspan style='display:none;' id='cnzz_stat_icon_1278032070'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "v1.cnzz.com/z_stat.php%3Fid%3D1278032070%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E"));</script> -->
<!-- <div style="text-align:center;clear:both"></div> -->
</head>
<body>
<div id="top">
<main id="top_main">
<div><a id="login_show">❤️</a></div>
<div id="top_logo"><img src="https://cdn.jsdelivr.net/gh/popzoo/guide/img/tx2.png" onmouseover="mouseOver()" onmouseout="mouseOut()" onclick="backBtnListen()" id="mainimg"></div>
<div id="top_title"><img id="top_title01" alt="" src="https://cdn.jsdelivr.net/gh/popzoo/guide/img/toptitle01.png">
	<!-- <br class="top_hr_style01">  float:right;margin: -15px 30px 0 0; -->
</div>
<div class="showcase-examples l-over l-center">
  <a id="own_time" href="#" title="时光轴" class="button button-rounded button-plain button-small-caps button-border" target="_blank">时光轴</a>
  <a id="own_danmu" href="#" title="云弹幕" class="button button-rounded button-plain button-small-caps button-border"target="_blank">云弹幕</a>
  <a id="own_gift" href="#" title="礼物秀" class="button button-rounded button-plain button-small-caps button-border" target="_blank">礼物秀</a>
  <a id="own_car" href="#" title="车队展" class="button button-rounded button-plain button-small-caps button-border" target="_blank">车队展</a>
  <a id="own_fire" href="#" title="火力房" class="button button-rounded button-plain button-small-caps button-border" target="_blank">火力房</a>
  <a id="own_form" href="#" title="报表单" class="button button-rounded button-plain button-small-caps button-border" target="_blank">报表单</a>
  <a id="own_data" href="#" title="看板台" class="button button-rounded button-plain button-small-caps button-border" target="_blank">看板台</a>
  <a id="own_audio" href="#" title="音乐炮" class="button button-rounded button-plain button-small-caps button-border" target="_blank">音乐炮</a>
  <a id="own_cfip" href="#" title="CF-IP" class="button button-rounded button-plain button-small-caps button-border" target="_blank">加速点</a>
  <a id="own_ping" href="#" onclick="checkBrowser(this)" title="GPing" class="button button-rounded button-plain button-small-caps button-border">平节点</a>
  <a id="own_daji" href="https://xnm.703747.xyz/" title="小妲己" class="button button-rounded button-plain button-small-caps button-border" target="_blank">小妲己</a>  
  <a id="own_disk" href="https://disk.popzoo.ga/"  title="OneDrive网盘" class="button button-rounded button-plain button-small-caps button-border" target="_blank">云网盘</a>
<!--   <a id="own_seek" href="https://seek.popzoo.ml/" title="Whoogle Search" class="button button-rounded button-plain button-small-caps button-border" target="_blank">云搜索</a> -->
  <a id="own_find" href="#" onclick="checkBrowser(this)" title="CF+Heroku" class="button button-rounded button-plain button-small-caps button-border">云引擎</a>
  <!-- <a id="own_deit" href="#" onclick="checkBrowser(this)" title="Vercel" class="button button-rounded button-plain button-small-caps button-border">云解析</a> -->
  <a id="own_deit" href="#" onclick="checkBrowser(this)" title="Pure-CF" class="button button-rounded button-plain button-small-caps button-border">云解析</a>
<!--   <a id="status_open" href="#" title="变开火" class="button button-rounded button-plain button-small-caps button-border" target="_blank">变开火</a>
  <a id="status_close" href="#" title="变停火" class="button button-rounded button-plain button-small-caps button-border" target="_blank">变停火</a> -->
</div>
</main>
</div>
<footer id="top_footer">
    <span id="top_copyright">
        Site has running:<span id='site-signal'>❤️</span><span id='site-time'>加载中</span><br>
        <a href="https://icp.gov.moe" target="_blank">萌ICP</a><a href="https://icp.gov.moe/?keyword=20210112" target="_blank">2020号</a>
        『江涵秋影枯万界,寒江孤舟驶星河』<span id='site-emoji'></span>
        <br>Copyright Reserved ©2021.Powered & CDN by Vercel
        <br>侵权删除/违法举报/咨询事宜等请
            <a href="mailto:lvlanxing@gmail.com?subject=邮件主题&amp;body=邮件内容" rel="nofollow" id="contact_mail" >发送邮件</a>，或使用<a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=3474800140" id="contact_qq">QQ联络</a>
    </span>
</footer>
</body>
<div class="aplayer" data-id="2054181801" data-server="netease" data-type="playlist" data-fixed="true" data-autoplay="true"
        data-volume="0.35" ></div>
<!-- <div class="aplayer" data-id="8103" data-server="netease" data-type="artist" data-fixed="true" data-autoplay="true"
        data-volume="0.35" ></div> -->
<script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/meting@1.2.0/dist/Meting.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/popzoo/pop/js/renewLink.js"></script>
<script src="https://libs.baidu.com/jquery/1.7.2/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/popzoo/guide/js/Browser.js"></script>
<!-- <script src="https://cdn.jsdelivr.net/gh/popzoo/guide/js/snowy.js"></script> -->
<script type="text/javascript">
    localStorage.setItem("modelId",0)
    localStorage.setItem("modelTexturesId",0);    
    var serverUrl = document.location.protocol+"//"+document.domain;
    // var serverUrl = "https://line.firenet.workers.dev/http/47.93.190.201/";
    (function ctrlBackEffect(){
        // var linkNode = document.createElement("link");
        // linkNode.setAttribute("rel","stylesheet");
        // linkNode.setAttribute("type","text/css");
        var scriptNode = document.createElement("script");
        scriptNode.setAttribute("type", "text/javascript");
        if(localStorage.getItem('showBack')!='off'){
            scriptNode.setAttribute("src", "https://cdn.jsdelivr.net/gh/popzoo/guide/js/snowy.js");
            document.body.appendChild(scriptNode);
        }
    })();
    function backBtnListen(){
        localStorage.getItem('showBack') == 'off' ? localStorage.setItem('showBack','on') : localStorage.setItem('showBack','off');
        window.location.reload();
    }
    (function getServerConfig(){
        fetch('https://cdn.jsdelivr.net/gh/popzoo/pop/json/paramConfig.json', {
            method: 'GET',
            mode: 'cors',
            cache: 'default',
            credentials: 'omit'
        }).then((res)=>{
            return res.json()
        }).then((json)=>{
            serverUrl = isValidIP(document.domain) ? serverUrl : window.atob(json.staticUrl);
            loginRender();
            isMobileDevice();
            lazyLoadImg();
            changeImg();
            activeHerok();
        }).catch((error)=>{
            console.error("请求错误", error.message)
            setTimeout(getServerConfig,1000*5);
        });
    })();
    function checkBrowser(obj){
        if(getCookie('auth')==null){
            location.href = document.location.protocol+"//"+document.domain+"/illegal.html";
        }else{
            var info = new Browser();
            if(info.browser.indexOf('360')>-1){
                alert('请不要用360浏览器查看此页面，强烈建议使用chrome浏览器！');
            }else{
                if(obj.id=="own_ping"){
                    window.open(document.location.protocol+"//"+document.domain+"/ping.html");
                }else if(obj.id=='own_find'){
                    window.open('https://line.firenet.workers.dev/');
                }else if(obj.id=='own_deit'){
                    window.open('https://more.firenet.workers.dev/');
                    // window.open('https://popset.vercel.app/');
                }        
            }                
        }
    }
    function loginRender(){
        if(getCookie('auth')==null){
            document.getElementById("login_show").innerText = "登录";
            document.getElementById("login_show").addEventListener('click',authCheck);

        }else{
            document.getElementById("login_show").innerText = "注销";
            document.getElementById("login_show").addEventListener('click',logoutAcc);
        }
    }
    function logoutAcc(){
        delCookie("auth");
        location.reload(true);
    }
    function isMobileDevice(){
        if(/Android|webOS|ucweb|midp|MicroMessenger|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)) {
            document.getElementById('top_footer').setAttribute('style','display:none');
        } else {
            siteSignal();
            siteTime();
        }

    }
    function activeHerok(){
        let requrl = serverUrl+'audioName';
        fetch(requrl, {
            method: 'GET',
            mode: 'cors', //请求模式为跨域
            cache: 'no-cache', //no-cache
            credentials: 'omit', // 同源则加入凭据头,cookies
        }).then((res) => {
            return res.text();
        }).then((text) => {
            console.debug(text);
        }).catch((error) => {
            console.error("bad request", error.message)
        });
    }
    function siteSignal(){
        window.setTimeout("siteSignal()", 2000);//(｡✪ᴗ✪｡) (*◕ᴗ◕*)  ┗(▔_▔)┛   ❤️💔💘
        document.getElementById("site-signal").innerHTML = "💔";
        document.getElementById("site-emoji").innerHTML = "(*◐ᴗ◑*)";
        setTimeout(function(){
           document.getElementById("site-signal").innerHTML = "❤️"; 
           document.getElementById("site-emoji").innerHTML = "(*✪ᴗ✪*)";
        },500);
        setTimeout(function(){
            document.getElementById("site-signal").innerHTML = "💝";
            document.getElementById("site-emoji").innerHTML = "┗(^_^)┛";
        },1000);
    }
    function siteTime() {
        window.setTimeout("siteTime()", 1000);
        var seconds = 1000
        var minutes = seconds * 60
        var hours = minutes * 60
        var days = hours * 24
        var years = days * 365
        var today = new Date()
        var todayYear = today.getFullYear()
        var todayMonth = today.getMonth()
        var todayDate = today.getDate()
        var todayHour = today.getHours()
        var todayMinute = today.getMinutes()
        var todaySecond = today.getSeconds()
        var t1 = Date.UTC(2019, 12, 12, 13, 36, 00)
        var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond)
        var diff = t2 - t1
        var diffYears = Math.floor(diff / years)
        var diffDays = Math.floor((diff / days) - diffYears * 365)
        var diffHours = Math.floor((diff - (diffYears * 365 + diffDays) * days) / hours)
        var diffMinutes = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours) / minutes)
        var diffSeconds = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours - diffMinutes * minutes) / seconds)
        document.getElementById("site-time").innerHTML = "" + diffYears + " 年 " + diffDays + " 天 " + diffHours + " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒"
    }
    function lazyLoadImg(){
        let prefix = "https://cdn.jsdelivr.net/gh/popzoo/guide/img/"; //"img/";
        let bodyBgs = ["nier_0.jpg","nier_1.jpg","nier_2.jpg","nier_3.jpg","nier_4.jpg","nier_5.jpg","nier_6.jpg","nier_7.jpg","nier_8.jpg","nier_9.jpg"];        
        preLoadImg(0);
        function preLoadImg(index){
            $.get(prefix + bodyBgs[index]);
            if(index<bodyBgs.length-1){
                setTimeout(function(){preLoadImg(++index)},500);
            }
        }        
    }
    function changeImg(){
        // let prefix = "https://lvlanxing.coding.net/p/popzoo/d/popzoo/git/raw/master/pics/";
        let prefix = "https://cdn.jsdelivr.net/gh/popzoo/guide/img/"; //"img/";
        let bodyBgs = ["nier_0.jpg","nier_1.jpg","nier_2.jpg","nier_3.jpg","nier_4.jpg","nier_5.jpg","nier_6.jpg","nier_7.jpg","nier_8.jpg","nier_9.jpg"];
        let rdIndex = Math.floor( Math.random() * bodyBgs.length );
        let img1= document.getElementById('bgimg');
        img1.style.backgroundImage='url(' + prefix + bodyBgs[rdIndex] + ')';

        window.setTimeout(function(){changeImg()},10000);
    }    
    // function logoutAuth(obj){
    //     if(obj.id == "own_logout"){
    //         delCookie('auth');
    //         window.location.reload(true);
    //     }
    // }
    function authCheck(){
        let pwd =window.prompt("郑重警告：此页面保密级别为【*绝密*】，仅供特勤人员专用，闲杂人等禁止入内，否则上门查水表!","");
        if (pwd!=null && pwd!=""){
            fetch(serverUrl+'/getauth?auth='+pwd.trim(),{
                method: 'GET',
                mode: 'cors', 
                cache: 'no-store', 
                credentials: 'omit', 
            }).then(res => {
                return res.json();
            }).then(json => {
                if(json.msg=="success"){
                    setCookie('auth',json.auth);
                    window.location.reload(true);
                }else{
                    delCookie("auth");
                    if(json.code == 401){
                        alert("密码错误，请重新输入");
                    }else if(json.code == 403){
                        alert("密码错误超过5次，请30min后重试");
                    }
                }                    
            }).catch(err => {
                console.error('请求错误', err);
            })        
        }
    }
    function mouseOver(){
        document.getElementById("mainimg").src="https://cdn.jsdelivr.net/gh/popzoo/guide/img/tx.png";//鼠标悬浮时的旋转图标
        // document.getElementById("mainimg").src="img/tx.png";//鼠标悬浮时的旋转图标
    }
    function mouseOut()
    {
        document.getElementById('mainimg').src ="https://cdn.jsdelivr.net/gh/popzoo/guide/img/tx2.png"//默认的旋转图标
    }
    // date util
    function dateFormat(fmt, date) {
        let ret;
        let opt = {
            "Y+": date.getFullYear().toString(),
            "m+": (date.getMonth() + 1).toString(),
            "d+": date.getDate().toString(),
            "H+": date.getHours().toString(),
            "M+": date.getMinutes().toString(),
            "S+": date.getSeconds().toString()
        };
        for (let k in opt) {
            ret = new RegExp("(" + k + ")").exec(fmt);
            if (ret) {
                fmt = fmt.replace(ret[1], (ret[1].length == 1) ? (opt[k]) : (opt[k].padStart(ret[1].length, "0")))
            };
        };
        return fmt;
    }        
    // set cookie
    function setCookie(name,value){
        //document.cookie.setPath("/");
        var exp = new Date(); 
        exp.setTime(exp.getTime() + 365*24*60*60*1000); 
        document.cookie = name + "="+ escape (value) + "; path=/; expires=" + exp.toGMTString();
    }
    // get cookie
    function getCookie(name){
        //document.cookie.setPath("/");
        var arr,reg=new RegExp("(^| )"+name+"=([^;]*)(;|$)"); 
    　　return (arr=document.cookie.match(reg))?unescape(arr[2]):null;
    }
    // del cookie
    function delCookie(name){
        var exp = new Date();
        exp.setTime(exp.getTime() - 1);
        var cval=getCookie(name);
        if(cval!=null) document.cookie= name + "="+cval+"; path=/; expires="+exp.toGMTString();
    }
    function isValidIP(ip) {
        var reg = /^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/
        return reg.test(ip);
    }      
	// createSnow('src/', 150);
</script>
<!-- <style type="text/css">.snow-container{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:100001;}</style> -->
<div class="snow-container"></div>
</html>